!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/material/icon"),require("@angular/material/button"),require("@angular/material/menu"),require("@angular/material/form-field"),require("@angular/material/input"),require("@pebula/ngrid"),require("@pebula/ngrid/overlay-panel")):"function"==typeof define&&define.amd?define("@pebula/ngrid-material/context-menu",["exports","@angular/core","@angular/common","@angular/material/icon","@angular/material/button","@angular/material/menu","@angular/material/form-field","@angular/material/input","@pebula/ngrid","@pebula/ngrid/overlay-panel"],e):e(((t=t||self).pebula=t.pebula||{},t.pebula["ngrid-material"]=t.pebula["ngrid-material"]||{},t.pebula["ngrid-material"]["context-menu"]={}),t.ng.core,t.ng.common,t.ng.material.icon,t.ng.material.button,t.ng.material.menu,t.ng.material["form-field"],t.ng.material.input,t.pebula.ngrid,t.overlayPanel)}(this,function(t,e,n,r,o,i,a,l,u,c){"use strict";var m=function(t,e){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function s(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function p(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}var d=function(){function t(t,e){this.pluginCtrl=e,this.overlayPanel=t.create(e.extApi.table)}return t.decorators=[{type:e.Directive,args:[{selector:"pbl-ngrid[matHeaderContextMenu]"}]}],t.ctorParameters=function(){return[{type:c.PblNgridOverlayPanelFactory},{type:u.PblNgridPluginController}]},t.propDecorators={style:[{type:e.Input,args:["matHeaderContextMenu"]}],config:[{type:e.Input}]},t=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}([u.TablePlugin({id:"matHeaderContextMenu"}),s("design:paramtypes",[c.PblNgridOverlayPanelFactory,u.PblNgridPluginController])],t)}();var g={hasBackdrop:!0,xPos:"after",yPos:"below"},f=function(){function t(t,e){this.plugin=t,this.elRef=e}return t.prototype.openOverlayPanel=function(){var t=this.plugin.config||g;this.plugin.overlayPanel.open(this.plugin.style,this.elRef,t,this.context)},t.decorators=[{type:e.Component,args:[{selector:"div[mat-header-context-menu-trigger]",host:{"(click)":"openOverlayPanel()"},template:'<mat-icon style="height: 16px; width: 16px; font-size: 16px; line-height: 16px;">more_vert</mat-icon>\n',encapsulation:e.ViewEncapsulation.None,styles:["div[mat-header-context-menu-trigger]{position:absolute;display:flex;align-items:center;right:0;height:100%;cursor:pointer;margin-right:12px;z-index:100}"]}]}],t.ctorParameters=function(){return[{type:d},{type:e.ElementRef}]},t}();var h=function(t){function e(e){var n=t.call(this)||this;return n.cfr=e,n.name="matHeaderContextMenuTrigger",n.kind="dataHeaderExtensions",n.projectContent=!1,n}return function(t,e){function n(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.shouldRender=function(t){return!!t.injector.get(d,!1)},e.prototype.getFactory=function(t){return this.cfr.resolveComponentFactory(f)},e.prototype.onCreated=function(t,e){e.instance.context=t,e.changeDetectorRef.markForCheck()},e}(u.PblNgridMultiComponentRegistry);var y=function(){function t(t,e){this.ref=t,this.vcRef=e,this.currentFilter="",this.column=t.data.col,this.grid=t.data.table,this.grid.ds.sort.column===this.column&&(this.currentSort=this.grid.ds.sort.sort.order),this.currentPin=this.column.columnDef.sticky?"start":this.column.columnDef.stickyEnd?"end":void 0;var n=this.grid.ds.filter;n&&"value"===n.type&&n.columns&&n.columns.indexOf(this.column)>=0&&(this.currentFilter=n.filter)}return t.prototype.ngAfterViewInit=function(){var t=this;this.matMenu.closed.subscribe(function(e){t.ref.close()});var e=this.vcRef.createEmbeddedView(this.matMenu.templateRef);this.matMenu.setElevation(0),this.matMenu.focusFirstItem("program"),this.matMenu._resetAnimation(),e.markForCheck(),e.detectChanges(),this.matMenu._startAnimation()},t.prototype.hide=function(){var t,e,n=[this.column.id];try{for(var r=p(this.grid.columnApi.columns),o=r.next();!o.done;o=r.next()){var i=o.value;i.hidden&&n.push(i.id)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.grid.hideColumns=n},t.prototype.onSortToggle=function(t){this.currentSort===t?this.grid.ds.setSort():this.grid.ds.setSort(this.column,{order:t})},t.prototype.onPinToggle=function(t){this.currentPin===t?this.column.columnDef.updatePin():this.column.columnDef.updatePin(t)},t.prototype.filterColumn=function(t){this.currentFilter=t,t?this.grid.setFilter(t.trim(),[this.column]):this.grid.setFilter()},t.prototype.clickTrap=function(t){t.preventDefault(),t.stopPropagation()},t.decorators=[{type:e.Component,args:[{selector:"mat-excel-style-header-menu",template:'<mat-menu #columnMenu="matMenu" class="pbl-mat-menu-panel">\n\n  <button *ngIf="column.sort" mat-menu-item [matMenuTriggerFor]="sortMenu">\n    <mat-icon>sort</mat-icon>Sort\n  </button>\n  <button mat-menu-item [matMenuTriggerFor]="pinMenu">\n    <mat-icon>place</mat-icon>Pin\n  </button>\n  <button mat-menu-item (click)="grid.columnApi.autoSizeColumn(column)">\n    <mat-icon>keyboard_tab</mat-icon>Auto Fit\n  </button>\n  <button mat-menu-item (click)="hide()">\n    <mat-icon>visibility_off</mat-icon>Hide Column\n  </button>\n\n  <mat-menu #sortMenu="matMenu">\n    <button mat-menu-item (click)="onSortToggle(\'asc\')" [class.menu-item-selected]="currentSort === \'asc\'">\n      <mat-icon [color]="currentSort === \'asc\' ? \'primary\' : \'\'">arrow_upward</mat-icon>\n      <span>Ascending</span>\n    </button>\n    <button mat-menu-item (click)="onSortToggle(\'desc\')" [class.menu-item-selected]="currentSort === \'desc\'">\n      <mat-icon [color]="currentSort === \'desc\' ? \'primary\' : \'\'">arrow_downward</mat-icon>\n      <span>Descending</span>\n    </button>\n  </mat-menu>\n\n  <mat-menu #pinMenu="matMenu">\n    <button mat-menu-item (click)="onPinToggle(\'start\')" [class.menu-item-selected]="currentPin === \'start\'">\n      <span>Start</span>\n    </button>\n    <button mat-menu-item (click)="onPinToggle(\'end\')" [class.menu-item-selected]="currentPin === \'end\'">\n      <span>End</span>\n    </button>\n  </mat-menu>\n\n  <div class="mat-menu-item pbl-mat-menu-row" (click)="clickTrap($event)">\n    <mat-form-field>\n      <mat-label>Search</mat-label>\n      <input matInput (keyup)="filterColumn($event.target.value)" [value]="currentFilter">\n      <mat-icon matPrefix>search</mat-icon>\n      <button mat-button [style.visibility]="currentFilter ? \'visible\' : \'hidden\'" matSuffix mat-icon-button aria-label="Clear"\n              (click)="filterColumn(\'\')">\n        <mat-icon>close</mat-icon>\n      </button>\n    </mat-form-field>\n  </div>\n</mat-menu>\n',encapsulation:e.ViewEncapsulation.None,styles:[".mat-menu-panel.pbl-mat-menu-panel{max-width:400px}.mat-menu-item.pbl-mat-menu-row{width:100%;box-sizing:border-box;line-height:inherit;height:auto;margin:6px 0;cursor:inherit}.mat-menu-item.pbl-mat-menu-row:hover{background:inherit}"]}]}],t.ctorParameters=function(){return[{type:c.PblNgridOverlayPanelRef},{type:e.ViewContainerRef}]},t.propDecorators={matMenu:[{type:e.ViewChild,args:["columnMenu",{read:i.MatMenu,static:!0}]}]},t}();var b=function(){function t(t,e,n,r){t||(e.addMulti("dataHeaderExtensions",new h(n)),e.addMulti("overlayPanels",new c.PblNgridOverlayPanelComponentExtension("excelMenu",y,n)))}return t.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule,r.MatIconModule,o.MatButtonModule,i.MatMenuModule,a.MatFormFieldModule,l.MatInputModule,u.PblNgridModule,c.PblNgridOverlayPanelModule],declarations:[f,d,y],exports:[d],entryComponents:[f,y]}]}],t.ctorParameters=function(){return[{type:t,decorators:[{type:e.Optional},{type:e.SkipSelf}]},{type:u.PblNgridRegistryService},{type:e.ComponentFactoryResolver},{type:u.PblNgridConfigService}]},t}();t.PblNgridContextMenuModule=b,t.ɵa=f,t.ɵb=d,t.ɵc=y,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=pebula-ngrid-material-context-menu.umd.min.js.map