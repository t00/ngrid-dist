{"version":3,"file":"pebula-ngrid-material-paginator.umd.js","sources":["ng://@pebula/ngrid-material/paginator/lib/table-paginator.component.ts","ng://@pebula/ngrid-material/paginator/lib/table-paginator.module.ts"],"sourcesContent":["import {\n  ChangeDetectorRef,\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  Optional,\n  ViewEncapsulation,\n  OnDestroy,\n} from '@angular/core';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { MatPaginatorIntl } from '@angular/material/paginator';\n\nimport { PblPagingPaginator, PblPaginatorChangeEvent, PblNgridComponent, utils } from '@pebula/ngrid';\n\nconst DEFAULT_PAGE_SIZE_OPTIONS = [5, 10, 20, 50, 100];\n\n@Component({\n  selector: 'pbl-ngrid-paginator',\n  templateUrl: './table-paginator.component.html',\n  styleUrls: ['./table-paginator.component.scss'],\n  host: {\n    'class': 'mat-paginator',\n  },\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None\n})\nexport class PblPaginatorComponent implements OnDestroy {\n  pages: number[] = [];\n  pageSizes: number[] = DEFAULT_PAGE_SIZE_OPTIONS.slice();\n\n  @Input() get pageSizeOptions(): number[] { return this._pageSizeOptions; }\n  set pageSizeOptions(value: number[]) {\n    this._pageSizeOptions = value;\n    this.pageSizes = (value || DEFAULT_PAGE_SIZE_OPTIONS).slice();\n    this.updatePageSizes();\n  }\n\n  @Input() get paginator(): PblPagingPaginator { return this._paginator; }\n  set paginator(value: PblPagingPaginator) {\n    if (this._paginator === value) {\n      return;\n    }\n    if (this._paginator) {\n      utils.unrx.kill(this, this._paginator);\n    }\n    this._paginator = value;\n    if (value) {\n      // pagination.onChange is BehaviorSubject so handlePageChange will trigger\n      value.onChange\n        .pipe(utils.unrx(this, value))\n        .subscribe( event => this.handlePageChange(event) );\n      this.updatePageSizes();\n    }\n  }\n\n  @Input() table: PblNgridComponent<any>;\n\n  @Input() get hidePageSize(): boolean { return this._hidePageSize; }\n  set hidePageSize(value: boolean) { this._hidePageSize = coerceBooleanProperty(value); }\n\n  @Input() get hideRangeSelect(): boolean { return this._hideRangeSelect; }\n  set hideRangeSelect(value: boolean) { this._hideRangeSelect = coerceBooleanProperty(value); }\n\n  private _pageSizeOptions: number[];\n  private _paginator: PblPagingPaginator;\n  private _hidePageSize = false;\n  private _hideRangeSelect = false;\n\n  constructor(@Optional() table: PblNgridComponent<any>,\n              public _intl: MatPaginatorIntl,\n              private cdr: ChangeDetectorRef) {\n    if (table) {\n      this.table = table;\n    }\n    _intl.changes\n      .pipe(utils.unrx(this))\n      .subscribe(() => this.cdr.markForCheck());\n  }\n\n  ngOnDestroy(): void {\n    utils.unrx.kill(this);\n  }\n\n  private updatePageSizes(): void {\n    if (this.paginator && this.pageSizes.indexOf(this.paginator.perPage) === -1) {\n      this.pageSizes.push(this.paginator.perPage);\n    }\n    this.pageSizes.sort((a, b) => a - b);\n  }\n\n  private handlePageChange(event: PblPaginatorChangeEvent): void {\n    if (this.pages.length !== this.paginator.totalPages) {\n      const pages = this.pages = [];\n      for (let i = 1, len = this.paginator.totalPages+1; i<len; i++) { pages.push(i); }\n    }\n    // this is required here to prevent `ExpressionChangedAfterItHasBeenCheckedError` when the component has or wrapped\n    // by an ngIf\n    this.cdr.detectChanges();\n    this.cdr.markForCheck();\n  }\n}\n","import { NgModule, ComponentFactoryResolver, Injector } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatPaginator, MatPaginatorModule } from '@angular/material/paginator';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatButtonModule } from '@angular/material/button';\n\nimport { PblNgridModule } from '@pebula/ngrid';\nimport { PblPaginatorComponent } from './table-paginator.component';\n// TODO: Remove MatPaginatorModule and the initial code in the constructor\n// set the styles in the SCSS.\n\n@NgModule({\n  imports: [ CommonModule, MatPaginatorModule, MatSelectModule, MatTooltipModule, MatButtonModule, PblNgridModule ],\n  declarations: [ PblPaginatorComponent ],\n  exports: [ PblPaginatorComponent ],\n  // TODO: remove when ViewEngine is no longer supported by angular (V11 ???)\n  entryComponents: [ PblPaginatorComponent, MatPaginator ]\n})\nexport class PblNgridPaginatorModule {\n  constructor(cf: ComponentFactoryResolver, injector: Injector) {\n    // this is a workaround to ensure CSS from mat slider is loaded, otherwise it is omitted.\n    cf.resolveComponentFactory(MatPaginator).create(injector);\n  }\n}\n"],"names":["utils","coerceBooleanProperty","Component","ChangeDetectionStrategy","ViewEncapsulation","PblNgridComponent","Optional","MatPaginatorIntl","ChangeDetectorRef","Input","MatPaginator","NgModule","CommonModule","MatPaginatorModule","MatSelectModule","MatTooltipModule","MatButtonModule","PblNgridModule","ComponentFactoryResolver","Injector"],"mappings":"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"}