{"version":3,"file":"pebula-ngrid-bootstrap-pagination.js","sources":["../../../../libs/ngrid-bootstrap/pagination/src/lib/bs-pagination.component.ts","../../../../libs/ngrid-bootstrap/pagination/src/lib/bs-pagination.component.html","../../../../libs/ngrid-bootstrap/pagination/src/lib/bs-pagination.module.ts","../../../../libs/ngrid-bootstrap/pagination/src/pebula-ngrid-bootstrap-pagination.ts"],"sourcesContent":["import {\n  ChangeDetectorRef,\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  Optional,\n  ViewEncapsulation,\n  OnDestroy,\n} from '@angular/core';\nimport { BooleanInput, coerceBooleanProperty } from '@angular/cdk/coercion';\n\nimport { unrx } from '@pebula/ngrid/core';\nimport { PblNgridComponent, PblPaginator, PblPaginatorChangeEvent } from '@pebula/ngrid';\n\nconst DEFAULT_PAGE_SIZE_OPTIONS = [5, 10, 20, 50, 100];\n\n@Component({\n  selector: 'pbl-ngrid-bs-pagination',\n  templateUrl: './bs-pagination.component.html',\n  styleUrls: ['./bs-pagination.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None\n})\nexport class PblNgridBsPagination implements OnDestroy {\n  pages: number[] = [];\n  pageSizes: number[] = DEFAULT_PAGE_SIZE_OPTIONS.slice();\n\n  @Input() get pageSizeOptions(): number[] { return this._pageSizeOptions; }\n  set pageSizeOptions(value: number[]) {\n    this._pageSizeOptions = value;\n    this.pageSizes = (value || DEFAULT_PAGE_SIZE_OPTIONS).slice();\n    this.updatePageSizes();\n  }\n\n  @Input() get paginator(): PblPaginator<number> { return this._paginator; }\n  set paginator(value: PblPaginator<number>) {\n    if (this._paginator === value) {\n      return;\n    }\n    if (this._paginator) {\n      unrx.kill(this, this._paginator);\n    }\n    this._paginator = value;\n    if (value) {\n      // pagination.onChange is BehaviorSubject so handlePageChange will trigger\n      value.onChange\n        .pipe(unrx(this, value))\n        .subscribe( event => this.handlePageChange(event) );\n      this.updatePageSizes();\n    }\n  }\n\n  @Input() grid: PblNgridComponent<any>;\n\n  @Input() get hidePageSize(): boolean { return this._hidePageSize; }\n  set hidePageSize(value: boolean) { this._hidePageSize = coerceBooleanProperty(value); }\n\n  @Input() get hideRangeSelect(): boolean { return this._hideRangeSelect; }\n  set hideRangeSelect(value: boolean) { this._hideRangeSelect = coerceBooleanProperty(value); }\n\n  private _pageSizeOptions: number[];\n  private _paginator: PblPaginator<number>;\n  private _hidePageSize = false;\n  private _hideRangeSelect = false;\n\n  constructor(@Optional() grid: PblNgridComponent<any>, private cdr: ChangeDetectorRef) {\n    if (grid) {\n      this.grid = grid;\n    }\n  }\n\n  ngOnDestroy(): void {\n    unrx.kill(this);\n  }\n\n  _pageChanged(page: number): void {\n    this.paginator.page = page;\n  }\n\n  _perPageChanged(value: string): void {\n    const perPage = parseInt(value, 10);\n    this.paginator.perPage = perPage;\n  }\n\n  private updatePageSizes(): void {\n    if (this.paginator && this.pageSizes.indexOf(this.paginator.perPage) === -1) {\n      this.pageSizes.push(this.paginator.perPage);\n    }\n    this.pageSizes.sort((a, b) => a - b);\n  }\n\n  private handlePageChange(event: PblPaginatorChangeEvent): void {\n    if (this.pages.length !== this.paginator.totalPages) {\n      const pages = this.pages = [];\n      for (let i = 1, len = this.paginator.totalPages+1; i<len; i++) { pages.push(i); }\n    }\n    // this is required here to prevent `ExpressionChangedAfterItHasBeenCheckedError` when the component has or wrapped\n    // by an ngIf\n    this.cdr.detectChanges();\n    this.cdr.markForCheck();\n  }\n\n  static ngAcceptInputType_hidePageSize: BooleanInput;\n  static ngAcceptInputType_hideRangeSelect: BooleanInput;\n}\n","<div class=\"d-flex align-items-center justify-content-end p-2\">\n\n  <div *ngIf=\"!hidePageSize\" class=\"mr-4\">\n    <label class=\"mr-2\" for=\"selectPerPage\">Item's per page</label>\n    <select *ngIf=\"pageSizes.length > 1\" #selectPerPage id=\"selectPerPage\"\n            class=\"custom-select\" style=\"width: auto\"\n            [value]=\"paginator.perPage\"\n            (change)=\"_perPageChanged(selectPerPage.value)\"\n            [disabled]=\"pageSizes[0] >= paginator.total && (!paginator.hasPrev() && !paginator.hasNext())\">\n      <option *ngFor=\"let pageSizeOption of pageSizes\" [value]=\"pageSizeOption\" [selected]=\"pageSizeOption == paginator.perPage\">\n        {{pageSizeOption}}\n      </option>\n    </select>\n    <div *ngIf=\"pageSizes.length <= 1\">{{paginator?.perPage}}</div>\n  </div>\n\n  <ngb-pagination class=\"d-flex align-items-center justify-content-end\"\n                  [collectionSize]=\"paginator.total\" [page]=\"paginator.page\" [pageSize]=\"paginator.perPage\"\n                  [maxSize]=\"5\" [rotate]=\"true\" [boundaryLinks]=\"true\"\n                  (pageChange)=\"_pageChanged($event)\"></ngb-pagination>\n</div>\n","import { NgModule, ComponentFactoryResolver, Injector } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgbPaginationModule } from '@ng-bootstrap/ng-bootstrap';\n\nimport { PblNgridModule } from '@pebula/ngrid';\nimport { PblNgridBsPagination } from './bs-pagination.component';\n\n@NgModule({\n  imports: [ CommonModule, NgbPaginationModule, PblNgridModule ],\n  declarations: [ PblNgridBsPagination ],\n  exports: [ NgbPaginationModule, PblNgridBsPagination ],\n  // TODO(REFACTOR_REF 2): remove when ViewEngine is no longer supported by angular (V12 ???)\n  entryComponents: [ PblNgridBsPagination ]\n})\nexport class PblNgridBsPaginationModule { }\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}