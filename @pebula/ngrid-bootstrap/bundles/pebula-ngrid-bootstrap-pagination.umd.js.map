{"version":3,"file":"pebula-ngrid-bootstrap-pagination.umd.js","sources":["../../../../libs/ngrid-bootstrap/pagination/src/lib/bs-pagination.component.ts","../../../../libs/ngrid-bootstrap/pagination/src/lib/bs-pagination.component.html","../../../../libs/ngrid-bootstrap/pagination/src/lib/bs-pagination.module.ts","../../../../libs/ngrid-bootstrap/pagination/src/pebula-ngrid-bootstrap-pagination.ts"],"sourcesContent":["import {\n  ChangeDetectorRef,\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  Optional,\n  ViewEncapsulation,\n  OnDestroy,\n} from '@angular/core';\nimport { BooleanInput, coerceBooleanProperty } from '@angular/cdk/coercion';\n\nimport { unrx } from '@pebula/ngrid/core';\nimport { PblNgridComponent, PblPaginator, PblPaginatorChangeEvent } from '@pebula/ngrid';\n\nconst DEFAULT_PAGE_SIZE_OPTIONS = [5, 10, 20, 50, 100];\n\n@Component({\n  selector: 'pbl-ngrid-bs-pagination',\n  templateUrl: './bs-pagination.component.html',\n  styleUrls: ['./bs-pagination.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None\n})\nexport class PblNgridBsPagination implements OnDestroy {\n  pages: number[] = [];\n  pageSizes: number[] = DEFAULT_PAGE_SIZE_OPTIONS.slice();\n\n  @Input() get pageSizeOptions(): number[] { return this._pageSizeOptions; }\n  set pageSizeOptions(value: number[]) {\n    this._pageSizeOptions = value;\n    this.pageSizes = (value || DEFAULT_PAGE_SIZE_OPTIONS).slice();\n    this.updatePageSizes();\n  }\n\n  @Input() get paginator(): PblPaginator<number> { return this._paginator; }\n  set paginator(value: PblPaginator<number>) {\n    if (this._paginator === value) {\n      return;\n    }\n    if (this._paginator) {\n      unrx.kill(this, this._paginator);\n    }\n    this._paginator = value;\n    if (value) {\n      // pagination.onChange is BehaviorSubject so handlePageChange will trigger\n      value.onChange\n        .pipe(unrx(this, value))\n        .subscribe( event => this.handlePageChange(event) );\n      this.updatePageSizes();\n    }\n  }\n\n  @Input() grid: PblNgridComponent<any>;\n\n  @Input() get hidePageSize(): boolean { return this._hidePageSize; }\n  set hidePageSize(value: boolean) { this._hidePageSize = coerceBooleanProperty(value); }\n\n  @Input() get hideRangeSelect(): boolean { return this._hideRangeSelect; }\n  set hideRangeSelect(value: boolean) { this._hideRangeSelect = coerceBooleanProperty(value); }\n\n  private _pageSizeOptions: number[];\n  private _paginator: PblPaginator<number>;\n  private _hidePageSize = false;\n  private _hideRangeSelect = false;\n\n  constructor(@Optional() grid: PblNgridComponent<any>, private cdr: ChangeDetectorRef) {\n    if (grid) {\n      this.grid = grid;\n    }\n  }\n\n  ngOnDestroy(): void {\n    unrx.kill(this);\n  }\n\n  _pageChanged(page: number): void {\n    this.paginator.page = page;\n  }\n\n  _perPageChanged(value: string): void {\n    const perPage = parseInt(value, 10);\n    this.paginator.perPage = perPage;\n  }\n\n  private updatePageSizes(): void {\n    if (this.paginator && this.pageSizes.indexOf(this.paginator.perPage) === -1) {\n      this.pageSizes.push(this.paginator.perPage);\n    }\n    this.pageSizes.sort((a, b) => a - b);\n  }\n\n  private handlePageChange(event: PblPaginatorChangeEvent): void {\n    if (this.pages.length !== this.paginator.totalPages) {\n      const pages = this.pages = [];\n      for (let i = 1, len = this.paginator.totalPages+1; i<len; i++) { pages.push(i); }\n    }\n    // this is required here to prevent `ExpressionChangedAfterItHasBeenCheckedError` when the component has or wrapped\n    // by an ngIf\n    this.cdr.detectChanges();\n    this.cdr.markForCheck();\n  }\n\n  static ngAcceptInputType_hidePageSize: BooleanInput;\n  static ngAcceptInputType_hideRangeSelect: BooleanInput;\n}\n","<div class=\"d-flex align-items-center justify-content-end p-2\">\n\n  <div *ngIf=\"!hidePageSize\" class=\"mr-4\">\n    <label class=\"mr-2\" for=\"selectPerPage\">Item's per page</label>\n    <select *ngIf=\"pageSizes.length > 1\" #selectPerPage id=\"selectPerPage\"\n            class=\"custom-select\" style=\"width: auto\"\n            [value]=\"paginator.perPage\"\n            (change)=\"_perPageChanged(selectPerPage.value)\"\n            [disabled]=\"pageSizes[0] >= paginator.total && (!paginator.hasPrev() && !paginator.hasNext())\">\n      <option *ngFor=\"let pageSizeOption of pageSizes\" [value]=\"pageSizeOption\" [selected]=\"pageSizeOption == paginator.perPage\">\n        {{pageSizeOption}}\n      </option>\n    </select>\n    <div *ngIf=\"pageSizes.length <= 1\">{{paginator?.perPage}}</div>\n  </div>\n\n  <ngb-pagination class=\"d-flex align-items-center justify-content-end\"\n                  [collectionSize]=\"paginator.total\" [page]=\"paginator.page\" [pageSize]=\"paginator.perPage\"\n                  [maxSize]=\"5\" [rotate]=\"true\" [boundaryLinks]=\"true\"\n                  (pageChange)=\"_pageChanged($event)\"></ngb-pagination>\n</div>\n","import { NgModule, ComponentFactoryResolver, Injector } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgbPaginationModule } from '@ng-bootstrap/ng-bootstrap';\n\nimport { PblNgridModule } from '@pebula/ngrid';\nimport { PblNgridBsPagination } from './bs-pagination.component';\n\n@NgModule({\n  imports: [ CommonModule, NgbPaginationModule, PblNgridModule ],\n  declarations: [ PblNgridBsPagination ],\n  exports: [ NgbPaginationModule, PblNgridBsPagination ],\n  // TODO(REFACTOR_REF 2): remove when ViewEngine is no longer supported by angular (V12 ???)\n  entryComponents: [ PblNgridBsPagination ]\n})\nexport class PblNgridBsPaginationModule { }\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["unrx","coerceBooleanProperty","Component","ChangeDetectionStrategy","ViewEncapsulation","Optional","Input","CommonModule","NgbPaginationModule","PblNgridModule","NgModule"],"mappings":"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"}