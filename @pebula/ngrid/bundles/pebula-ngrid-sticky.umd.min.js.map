{"version":3,"sources":["../../../../node_modules/tslib/tslib.es6.js","ng://@pebula/ngrid/sticky/lib/sticky/sticky-plugin.ts","ng://@pebula/ngrid/sticky/lib/sticky.module.ts"],"names":["__metadata","metadataKey","metadataValue","Reflect","metadata","__values","o","m","Symbol","iterator","i","call","next","length","value","done","__read","n","r","e","ar","push","error","PLUGIN_KEY","setStickyRow","grid","type","valueOrBulk","state","changed","isHeader","queryList","_headerRowDefs","_footerRowDefs","bulk","Array","isArray","addOneIfMainExists","showHeader","showFooter","bulk_1","tslib_1.__values","bulk_1_1","_b","state_1","idx","rowDef","toArray","sticky","_cdkTable","updateStickyHeaderRowStyles","updateStickyFooterRowStyles","setStickyColumns","columnId","state_2","columnApi","visibleColumns","findIndex","c","orgProp","pin","undefined","columnDef","stickyEnd","bulk_2","bulk_2_1","updateStickyColumnStyles","PblNgridStickyPluginDirective","_differs","pluginCtrl","_this","this","_columnCache","start","end","_removePlugin","setPlugin","events","pipe","filter","kind","subscribe","_startDiffer","isInit","diff","applyColumnDiff","_endDiffer","Object","defineProperty","prototype","find","create","_headerDiffer","applyRowDiff","_footerDiffer","ngOnDestroy","differ","changes","forEachOperation","record","prevIndex","currentIndex","previousIndex","item","unsub_1","event","unsubscribe","unsub_2","PblNgridComponent","IterableDiffers","PblNgridPluginController","Directive","args","selector","Input","decorators","target","key","desc","d","arguments","getOwnPropertyDescriptor","decorate","__decorate","NgridPlugin","id","MAPPER","v","PblNgridStickyModule","parentModule","configService","created","table","controller","hasPlugin","first","stickyPluginConfig","get","headers","map","footers","columnStart","columnEnd","NgModule","imports","CommonModule","CdkTableModule","PblNgridModule","declarations","exports","Optional","SkipSelf","PblNgridConfigService"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { filter } from 'rxjs/operators';\nimport { Directive, Input, IterableDiffers, IterableDiffer, IterableChangeRecord, OnDestroy } from '@angular/core';\n\nimport { PblNgridComponent, PblNgridPluginController, NgridPlugin } from '@pebula/ngrid';\n\n\ndeclare module '@pebula/ngrid/lib/ext/types' {\n  interface PblNgridPluginExtension {\n    sticky?: PblNgridStickyPluginDirective;\n  }\n}\n\nexport const PLUGIN_KEY: 'sticky' = 'sticky';\n\nexport function setStickyRow(grid: PblNgridComponent<any>, type: 'header' | 'footer', bulk: Array<['table' | number, boolean]>): void;\nexport function setStickyRow(grid: PblNgridComponent<any>, type: 'header' | 'footer', value: 'table' | number, state: boolean): void;\nexport function setStickyRow(grid: PblNgridComponent<any>, type: 'header' | 'footer', valueOrBulk: Array<['table' | number, boolean]> | 'table' | number, state?: boolean): void {\n  const isHeader = type === 'header';\n  const queryList = isHeader ? grid._headerRowDefs : grid._footerRowDefs;\n  const bulk: Array<['table' | number, boolean]> = Array.isArray(valueOrBulk) ? valueOrBulk : [ [valueOrBulk, state] ];\n\n  const addOneIfMainExists = (isHeader && grid.showHeader) || (!isHeader && grid.showFooter) ? 1 : 0;\n\n  let changed: boolean;\n  for (const [value, state] of bulk) {\n    // the index from the user is 0 based or the grid header/footer row.\n    // we store them both, so we need to convert... our first is always the grid header/footer and then we have the same order as the user's.\n    let idx = value === 'table' ? 0 : value + addOneIfMainExists;\n    if (!isHeader) {\n      // sticky-styler stickRows() methods will reverse the order of footer columns\n      // so we actually need to set another row to make the row we want sticky.\n      // we could reverse the collection, but choosing the opposite side is better.\n      // think [0, 1, 2, 3, 4] and we want 1. sticky-styler will reverse to [4, 3, 2, 1, 0] so doing nothing will stick 3.\n      // the opposite is length MINUS 1 MINUS index which is 5 - 1 - 1 which is 3, in the revered array its the row 1 which is what we wanted.\n      idx = (queryList.length - 1) - idx;\n    }\n\n    const rowDef = queryList.toArray()[idx];\n    if (rowDef && rowDef.sticky !== state) {\n      rowDef.sticky = state;\n      changed = true;\n    }\n  }\n\n  if (changed) {\n    if (isHeader) {\n      grid._cdkTable.updateStickyHeaderRowStyles();\n    } else {\n      grid._cdkTable.updateStickyFooterRowStyles();\n    }\n  }\n}\n\nexport function setStickyColumns(grid: PblNgridComponent<any>, type: 'start' | 'end', bulk: Array<[string | number, boolean]>): void;\nexport function setStickyColumns(grid: PblNgridComponent<any>, type: 'start' | 'end', value: string  | number, state: boolean): void;\nexport function setStickyColumns(grid: PblNgridComponent<any>, type: 'start' | 'end', valueOrBulk: Array<[string  | number, boolean]> | string  | number, state?: boolean): void {\n  const bulk: Array<[string | number, boolean]> = Array.isArray(valueOrBulk) ? valueOrBulk : [ [valueOrBulk, state] ];\n  let changed: boolean;\n  for (let [columnId, state] of bulk) {\n    if (typeof columnId === 'string') {\n      columnId = grid.columnApi.visibleColumns.findIndex( c => c.orgProp === columnId );\n    }\n    const c = grid.columnApi.visibleColumns[columnId];\n    if (c) {\n      changed = true;\n      c.pin = state ? type : undefined;\n      if (type === 'end') {\n        c.columnDef.stickyEnd = state;\n        c.columnDef.sticky = false;\n      } else {\n        c.columnDef.sticky = state;\n        c.columnDef.stickyEnd = false;\n      }\n    }\n  }\n  if (changed) {\n    grid._cdkTable.updateStickyColumnStyles();\n  }\n}\n\n@NgridPlugin({ id: PLUGIN_KEY })\n@Directive({ selector: 'pbl-ngrid[stickyColumnStart], pbl-ngrid[stickyColumnEnd], pbl-ngrid[stickyHeader], pbl-ngrid[stickyFooter]' })\nexport class PblNgridStickyPluginDirective implements OnDestroy {\n  /**\n   * Set the header rows you want to apply sticky positioning to.\n   * Valid values are:\n   *   - `grid` - Literal string `grid` that will set the grid's main header row.\n   *   - number  - The index of the row, for multi-header row. The index refers to the order you defined the header/headerGroup rows (base 0);\n   *\n   * For performance considerations only new values will trigger a change (i.e. the array should be treated as immutable).\n   * Manipulating the array will not trigger a change (the sticky state will not change) unless sending a copy of it (replacing it, e.g. Array.slice())\n   */\n  @Input() set stickyColumnStart(value: Array<string | number>) {\n    if (!this._startDiffer) {\n      this._startDiffer = this._differs.find([]).create();\n    }\n    this.applyColumnDiff('start', value, this._startDiffer);\n  }\n\n  /**\n   * Set the footer rows you want to apply sticky positioning to.\n   * Valid values are:\n   *   - `grid` - Literal string `grid` that will set the grid's main footer row.\n   *   - number  - The index of the row, for multi-footer row. The index refers to the order you defined the footer rows (base 0);\n   *\n   * For performance considerations only new values will trigger a change (i.e. the array should be treated as immutable).\n   * Manipulating the array will not trigger a change (the sticky state will not change) unless sending a copy of it (replacing it, e.g. Array.slice())\n   */\n  @Input() set stickyColumnEnd(value: Array<string | number>) {\n    if (!this._endDiffer) {\n      this._endDiffer = this._differs.find([]).create();\n    }\n    this.applyColumnDiff('end', value, this._endDiffer);\n  }\n\n    /**\n   * Set the header rows you want to apply sticky positioning to.\n   * Valid values are:\n   *   - `grid` - Literal string `grid` that will set the grid's main header row.\n   *   - number  - The index of the row, for multi-header row. The index refers to the order you defined the header/headerGroup rows (base 0);\n   *\n   * For performance considerations only new values will trigger a change (i.e. the array should be treated as immutable).\n   * Manipulating the array will not trigger a change (the sticky state will not change) unless sending a copy of it (replacing it, e.g. Array.slice())\n   */\n  @Input() set stickyHeader(value: Array<'table' | number>) {\n    if (!this._headerDiffer) {\n      this._headerDiffer = this._differs.find([]).create();\n    }\n    this.applyRowDiff('header', value, this._headerDiffer);\n  }\n\n  /**\n   * Set the footer rows you want to apply sticky positioning to.\n   * Valid values are:\n   *   - `grid` - Literal string `grid` that will set the grid's main footer row.\n   *   - number  - The index of the row, for multi-footer row. The index refers to the order you defined the footer rows (base 0);\n   *\n   * For performance considerations only new values will trigger a change (i.e. the array should be treated as immutable).\n   * Manipulating the array will not trigger a change (the sticky state will not change) unless sending a copy of it (replacing it, e.g. Array.slice())\n   */\n  @Input() set stickyFooter(value: Array<'table' | number>) {\n    if (!this._footerDiffer) {\n      this._footerDiffer = this._differs.find([]).create();\n    }\n    this.applyRowDiff('footer', value, this._footerDiffer);\n  }\n\n  private _startDiffer: IterableDiffer<string | number>;\n  private _endDiffer: IterableDiffer<string | number>;\n  private _headerDiffer: IterableDiffer<'table' | number>;\n  private _footerDiffer: IterableDiffer<'table' | number>;\n\n  private _columnCache: { start: Array<string | number>; end: Array<string | number>; } = { start: [], end: [] };\n  private _removePlugin: (grid: PblNgridComponent<any>) => void;\n\n  constructor (protected readonly grid: PblNgridComponent<any>,\n               protected readonly _differs: IterableDiffers,\n               protected readonly pluginCtrl: PblNgridPluginController) {\n    this._removePlugin = pluginCtrl.setPlugin(PLUGIN_KEY, this);\n\n    pluginCtrl.events\n      .pipe(filter( e => e.kind === 'onResizeRow'))\n      .subscribe( () => {\n        this.grid._cdkTable.updateStickyHeaderRowStyles();\n        this.grid._cdkTable.updateStickyColumnStyles();\n        this.grid._cdkTable.updateStickyFooterRowStyles();\n      });\n\n      pluginCtrl.events\n        .pipe(filter ( e => e.kind === 'onInvalidateHeaders' ))\n        .subscribe( () => {\n          if (this._startDiffer && this.grid.isInit) {\n            this._startDiffer.diff([]);\n            this.applyColumnDiff('start', this._columnCache.start, this._startDiffer)\n          }\n\n          if (this._endDiffer && this.grid.isInit) {\n            this._endDiffer.diff([]);\n            this.applyColumnDiff('end', this._columnCache.end, this._endDiffer)\n          }\n        });\n  }\n\n  ngOnDestroy(): void {\n    this._removePlugin(this.grid);\n  }\n\n  protected applyColumnDiff(type: 'start' | 'end', value: Array<string | number>, differ: IterableDiffer<string | number>): void {\n    if (!this.grid.isInit) {\n      const unsub = this.pluginCtrl.events.subscribe( event => {\n        if (event.kind === 'onInit') {\n          unsub.unsubscribe();\n          this.applyColumnDiff(type, value, differ);\n        }\n      });\n      return;\n    }\n\n    this._columnCache[type] = value || [];\n\n    const changes = differ.diff(value || []);\n    const bulk: Array<[string | number, boolean]> = [];\n    changes.forEachOperation((record: IterableChangeRecord<string | number>, prevIndex: number, currentIndex: number) => {\n      if (record.previousIndex == null) {\n        bulk.push([record.item, true]);\n      } else if (currentIndex == null) {\n        bulk.push([record.item, false]);\n      }\n    });\n    if (bulk.length > 0) {\n      setStickyColumns(this.grid, type, bulk);\n    }\n  }\n\n  protected applyRowDiff(type: 'header' | 'footer', value: Array<'table' | number>, differ: IterableDiffer<'table' | number>): void {\n    if (!this.grid.isInit) {\n      const unsub = this.pluginCtrl.events.subscribe( event => {\n        if (event.kind === 'onInit') {\n          unsub.unsubscribe();\n          this.applyRowDiff(type, value, differ);\n        }\n      });\n      return;\n    }\n\n    const changes = differ.diff(value || []);\n    const bulk: Array<['table' | number, boolean]> = [];\n    changes.forEachOperation((record: IterableChangeRecord<'table' | number>, prevIndex: number, currentIndex: number) => {\n      if (record.previousIndex == null) {\n        bulk.push([record.item, true]);\n      } else if (currentIndex == null) {\n        bulk.push([record.item, false]);\n      }\n    });\n    if (bulk.length > 0) {\n      setStickyRow(this.grid, type, bulk);\n    }\n  }\n}\n","import { filter, first } from 'rxjs/operators';\nimport { NgModule, Optional, SkipSelf } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { CdkTableModule } from '@angular/cdk/table';\nimport { PblNgridModule, PblNgridPluginController, PblNgridConfigService } from '@pebula/ngrid';\nimport { PblNgridStickyPluginDirective, setStickyRow, setStickyColumns } from './sticky/sticky-plugin';\n\ndeclare module '@pebula/ngrid/lib/grid/services/config' {\n  interface PblNgridConfig {\n    stickyPlugin?: {\n      headers?: Array<'table' | number>;\n      footers?: Array<'table' | number>;\n      columnStart?: Array<string | number>;\n      columnEnd?: Array<string | number>;\n    }\n  }\n}\n\nconst MAPPER = <T>(v: T): [T, boolean] => [v, true];\n\n@NgModule({\n  imports: [ CommonModule, CdkTableModule, PblNgridModule ],\n  declarations: [ PblNgridStickyPluginDirective ],\n  exports: [ PblNgridStickyPluginDirective ],\n})\nexport class PblNgridStickyModule {\n  constructor(@Optional() @SkipSelf() parentModule: PblNgridStickyModule,\n              configService: PblNgridConfigService) {\n    if (parentModule) {\n      return;\n    }\n\n    PblNgridPluginController.created\n      .subscribe( event => {\n        const { table, controller } = event;\n        if (controller && !controller.hasPlugin('sticky')) {\n          controller.events\n            .pipe( filter( e => e.kind === 'onInit' ), first() )\n            .subscribe( event => {\n              const stickyPluginConfig = configService.get('stickyPlugin');\n              if (stickyPluginConfig) {\n                if (stickyPluginConfig.headers) {\n                  setStickyRow(table, 'header', stickyPluginConfig.headers.map(MAPPER));\n                }\n                if (stickyPluginConfig.footers) {\n                  setStickyRow(table, 'footer', stickyPluginConfig.footers.map(MAPPER));\n                }\n                if (stickyPluginConfig.columnStart) {\n                  setStickyColumns(table, 'start', stickyPluginConfig.columnStart.map(MAPPER));\n                }\n                if (stickyPluginConfig.columnEnd) {\n                  setStickyColumns(table, 'end', stickyPluginConfig.columnEnd.map(MAPPER));\n                }\n              }\n            });\n        }\n      });\n  }\n}\n"]}